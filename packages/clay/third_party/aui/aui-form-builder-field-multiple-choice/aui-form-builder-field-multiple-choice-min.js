YUI.add("aui-form-builder-field-multiple-choice",function(e,t){var n=e.Lang,r=n.isArray,i=e.Array,s=e.getClassName,o=function(e){var t={};return i.each(e,function(e){t[e.value]=e.label}),t},u=s("form-builder","field"),a=s("form-builder","options","editor","hidden"),f=e.Component.create({NAME:"form-builder-options-editor",ATTRS:{editable:{setter:function(){return!1}}},EXTENDS:e.RadioCellEditor,prototype:{ELEMENT_TEMPLATE:'<div class="'+a+'"></div>',initializer:function(){var e=this;e.after("render",function(){e._onEditEvent()})},_handleSaveEvent:function(){var e=this;e.saveOptions(),f.superclass._handleSaveEvent.apply(this,arguments)}}}),l=e.Component.create({NAME:"form-builder-multiple-choice-field",ATTRS:{acceptChildren:{value:!1,readOnly:!0},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{label}</option>'},predefinedValue:{setter:function(e){return r(e)?e:[e]}}},UI_ATTRS:["acceptChildren","label","name","options","predefinedValue","showLabel"],CSS_PREFIX:u,EXTENDS:e.FormBuilderField,prototype:{initializer:function(){var t=this,n=t.get("options");t.predefinedValueEditor=new e.DropDownCellEditor({options:o(n)})},getPropertyModel:function(){var t=this,n=t.get("options"),s=t.getStrings(),u=e.FormBuilderMultipleChoiceField.superclass.getPropertyModel.apply(t,arguments);return i.each(u,function(n,i,s){n.attributeName==="predefinedValue"&&(s[i]=e.merge(n,{editor:t.predefinedValueEditor,formatter:function(n){var i=t.predefinedValueEditor.get("options"),s=n.data.value;r(s)||(s=[s]);var o=e.Array.map(s,function(e){return i[e]});return o.join(", ")}}))}),u.push({attributeName:"options",editor:new f({editable:!0,on:{optionsChange:function(e){t.predefinedValueEditor.set("options",e.newVal)}},options:o(n),inputFormatter:function(){var t=[];return e.each(this.get("options"),function(r,s){var o={label:r,value:s};i.each(n,function(t){t.value===s&&(o=e.merge(t,o))}),t.push(o)}),t}}),formatter:function(t){var n=[];return e.each(t.data.value,function(e){n.push(e.label)}),n.join(", ")},name:s.options}),u},_uiSetOptions:function(t){var r=this,i=[];e.each(t,function(e){i.push(n.sub(r.get("optionTemplate"),{label:e.label,value:e.value}))}),r.optionNodes=e.NodeList.create(i.join("")),r.get("templateNode").setContent(r.optionNodes),r._uiSetPredefinedValue(r.get("predefinedValue"))},_uiSetPredefinedValue:function(e){var t=this,n=t.optionNodes;if(!n)return;n.set("selected",!1),i.each(e,function(e){n.filter('[value="'+e+'"]').set("selected",!0)})}}});e.FormBuilderMultipleChoiceField=l,e.FormBuilder.types["multiple-choice"]=e.FormBuilderMultipleChoiceField},"2.5.0",{requires:["aui-form-builder-field-base"]});
