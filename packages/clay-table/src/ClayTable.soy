{namespace ClayTable}

/**
 * This renders the component's whole content.
 */
{template .render}
	{@param spritemap: string}
	{@param? elementClasses: string}
	{@param? header: list<[
		colSpan: int,
		elementClasses: string,
		label: string,
		sort: bool,
		sortDirection_: string
	]>}
	{@param? handleSortColum_: any}
	{@param? id: string}
	{@param? items: list<[
		actionItems: list<[
			disabled: bool,
			icon: string,
			label: string,
			quickAction: bool,
			separator: bool,
			url: string
		]>,
		columns: list<[
			elementClasses: string,
			label: string,
			labelStyle: string,
			progressBar: [
				maxValue: int,
				minValue: int,
				status: string,
				value: int
			],
			text: string,
			url: string,
			useEllipse: bool
		]>,
		disabled: bool,
		group: string,
		inputName: string,
		inputValue: string,
		selectable: bool,
		selected: bool,
		stickerImageAlt: string,
		stickerImageSrc: string,
		stickerLabel: string,
		stickerStyle: string,
		stickerShape: string
	]>}

	{let $attributes kind="attributes"}
		class="table table-autofit table-heading-nowrap table-hover table-list show-quick-actions-on-hover
			{if $elementClasses}
				{sp}{$elementClasses}
			{/if}
		"

		{if $id}
			id="{$id}"
		{/if}
	{/let}

	<div class="table-responsive">
		<table {$attributes}>
			{if $header}
				<thead>
					<tr>
						{foreach $item in $header}
							{let $thAttributes kind="attributes"}
								class="
									{if $item.elementClasses}
										{$item.elementClasses}
									{/if}
								"

								{if $item.colSpan}
									colspan="{$item.colSpan}"
								{/if}
							{/let}

							<th {$thAttributes}>
								{if $item.label and not $item.sort}
									{$item.label}
								{elseif $item.sort and $item.label}
									{let $icon: $item.sortDirection_ ?: 'down' /}

									{call ClayLink.render}
										{param events: ['click': $handleSortColum_] /}
										{param href: '#sort' /}
										{param icon: 'order-arrow-{$icon}' /}
										{param iconAlignment: 'right' /}
										{param spritemap: $spritemap /}
									{/call}
								{/if}
							</th>
						{/foreach}
					</tr>
				</thead>
			{/if}
			{if $items}
				<tbody>
					{foreach $item in $items}
						{call ClayTableItem.render}
							{param actionItems: $item.actionItems /}
							{param columns: $item.columns /}
							{param disabled: $item.disabled /}
							{param group: $item.group /}
							{param inputName: $item.inputName /}
							{param inputValue: $item.inputValue /}
							{param selectable: $item.selectable /}
							{param selected: $item.selected /}
							{param spritemap: $spritemap /}
							{param stickerImageAlt: $item.stickerImageAlt /}
							{param stickerImageSrc: $item.stickerImageSrc /}
							{param stickerLabel: $item.stickerLabel /}
							{param stickerShape: $item.stickerShape /}
							{param stickerStyle: $item.stickerStyle /}
						{/call}
					{/foreach}
				</tbody>
			{/if}
		</table>
	</div>
{/template}
